<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRGä¸¥é€‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        nav ul li a:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .auth-buttons button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
            transition: background 0.3s;
        }
        
        .auth-buttons button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .page {
            display: none;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 20px;
        }
        
        .active {
            display: block;
        }
        
        h2 {
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #6a11cb;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="password"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button.primary {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: transform 0.2s;
        }
        
        button.primary:hover {
            transform: translateY(-2px);
        }
        
        .form-footer {
            margin-top: 15px;
            text-align: center;
        }
        
        .form-footer a {
            color: #6a11cb;
            text-decoration: none;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .product-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .product-image {
            height: 200px;
            background-color: #f9f9f9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .product-info {
            padding: 15px;
        }
        
        .product-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .product-price {
            color: #6a11cb;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .product-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .product-actions {
            display: flex;
            justify-content: space-between;
        }
        
        .btn-buy {
            background: #6a11cb;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .btn-buy:hover {
            background: #5a0db3;
        }
        
        .cart-summary {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-total {
            font-weight: bold;
            font-size: 18px;
            margin-top: 10px;
            text-align: right;
        }
        
        .order-success {
            text-align: center;
            padding: 40px;
        }
        
        .order-success i {
            font-size: 60px;
            color: #4CAF50;
            margin-bottom: 20px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .welcome {
            margin-right: 15px;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
                justify-content: center;
            }
            
            .auth-buttons {
                margin-top: 15px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">DRGä¸¥é€‰</div>
                <nav>
                    <ul>
                        <li><a href="#" onclick="showPage('home')">é¦–é¡µ</a></li>
                        <li><a href="#" onclick="showPage('products')">å•†å“</a></li>
                        <li><a href="#" onclick="showPage('cart')">è´­ç‰©è½¦</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons" id="authButtons">
                    <button onclick="showPage('login')">ç™»å½•</button>
                    <button onclick="showPage('register')">æ³¨å†Œ</button>
                </div>
                <div class="user-info" id="userInfo" style="display: none;">
                    <span class="welcome" id="welcomeUser">æ¬¢è¿ï¼Œç”¨æˆ·</span>
                    <button onclick="logout()">é€€å‡º</button>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="home" class="page active">
            <h2>æ¬¢è¿æ¥åˆ°DRGä¸¥é€‰</h2>
            <p>æˆ‘ä»¬æä¾›å„ç±»ä¼˜è´¨å•†å“ï¼Œæ»¡è¶³æ‚¨çš„è´­ç‰©éœ€æ±‚ã€‚</p>
            <p>è¯·ç™»å½•æˆ–æ³¨å†Œåå¼€å§‹è´­ç‰©ã€‚</p>
        </div>
        
        <!-- ç™»å½•é¡µé¢ -->
        <div id="login" class="page">
            <h2>ç”¨æˆ·ç™»å½•</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">é‚®ç®±</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">å¯†ç </label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="primary">ç™»å½•</button>
            </form>
            <div class="form-footer">
                <p>è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" onclick="showPage('register')">ç«‹å³æ³¨å†Œ</a></p>
            </div>
        </div>
        
        <!-- æ³¨å†Œé¡µé¢ -->
        <div id="register" class="page">
            <h2>ç”¨æˆ·æ³¨å†Œ</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">å§“å</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">é‚®ç®±</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">å¯†ç </label>
                    <input type="password" id="registerPassword" required>
                </div>
                <button type="submit" class="primary">æ³¨å†Œ</button>
            </form>
            <div class="form-footer">
                <p>å·²æœ‰è´¦å·ï¼Ÿ<a href="#" onclick="showPage('login')">ç«‹å³ç™»å½•</a></p>
            </div>
        </div>
        
        <!-- å•†å“é¡µé¢ -->
        <div id="products" class="page">
            <h2>å•†å“åˆ—è¡¨</h2>
            <div class="products-grid" id="productsGrid">
                <!-- å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>
        
        <!-- è´­ç‰©è½¦é¡µé¢ -->
        <div id="cart" class="page">
            <h2>è´­ç‰©è½¦</h2>
            <div id="cartItems">
                <!-- è´­ç‰©è½¦å•†å“å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
            <div class="cart-summary">
                <div class="cart-total">æ€»è®¡: Â¥<span id="cartTotal">0</span></div>
                <button class="primary" onclick="placeOrder()" style="margin-top: 15px;">ä¸€é”®ä¸‹å•</button>
            </div>
        </div>
        
        <!-- è®¢å•æˆåŠŸé¡µé¢ -->
        <div id="orderSuccess" class="page">
            <div class="order-success">
                <div>âœ“</div>
                <h2>ä¸‹å•æˆåŠŸï¼</h2>
                <p>æ„Ÿè°¢æ‚¨çš„è´­ä¹°ï¼Œè®¢å•å·²æäº¤ã€‚</p>
                <button class="primary" onclick="showPage('products')" style="margin-top: 20px;">ç»§ç»­è´­ç‰©</button>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–ç”¨æˆ·æ•°æ®å’Œå•†å“æ•°æ®
        function initializeData() {
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰ç”¨æˆ·æ•°æ®
            if (!localStorage.getItem('users')) {
                const defaultUsers = [
                    { id: 1, name: 'æ¼”ç¤ºç”¨æˆ·', email: 'demo@example.com', password: '123456' }
                ];
                localStorage.setItem('users', JSON.stringify(defaultUsers));
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰å•†å“æ•°æ®
            if (!localStorage.getItem('products')) {
                const defaultProducts = [
                    { id: 1, name: 'æ™ºèƒ½æ‰‹æœº', price: 2999, description: 'æœ€æ–°æ¬¾æ™ºèƒ½æ‰‹æœºï¼ŒåŠŸèƒ½å¼ºå¤§', image: 'ğŸ“±' },
                    { id: 2, name: 'ç¬”è®°æœ¬ç”µè„‘', price: 5999, description: 'é«˜æ€§èƒ½ç¬”è®°æœ¬ç”µè„‘ï¼Œé€‚åˆåŠå…¬å’Œæ¸¸æˆ', image: 'ğŸ’»' },
                    { id: 3, name: 'æ— çº¿è€³æœº', price: 699, description: 'é«˜å“è´¨æ— çº¿è€³æœºï¼ŒéŸ³è´¨å‡ºè‰²', image: 'ğŸ§' },
                    { id: 4, name: 'æ™ºèƒ½æ‰‹è¡¨', price: 1299, description: 'å¤šåŠŸèƒ½æ™ºèƒ½æ‰‹è¡¨ï¼Œå¥åº·ç›‘æµ‹', image: 'âŒš' },
                    { id: 5, name: 'å¹³æ¿ç”µè„‘', price: 2599, description: 'è½»è–„ä¾¿æºå¹³æ¿ï¼Œå¨±ä¹åŠå…¬ä¸¤ç›¸å®œ', image: 'ğŸ“±' },
                    { id: 6, name: 'æ•°ç ç›¸æœº', price: 4599, description: 'ä¸“ä¸šçº§æ•°ç ç›¸æœºï¼Œæ‹æ‘„æ›´æ¸…æ™°', image: 'ğŸ“·' }
                ];
                localStorage.setItem('products', JSON.stringify(defaultProducts));
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰è´­ç‰©è½¦æ•°æ®
            if (!localStorage.getItem('cart')) {
                localStorage.setItem('cart', JSON.stringify([]));
            }
            
            // æ£€æŸ¥å½“å‰ç™»å½•çŠ¶æ€
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                updateUIForLoggedInUser(JSON.parse(currentUser));
            }
        }
        
        // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
        function showPage(pageId) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºæŒ‡å®šé¡µé¢
            document.getElementById(pageId).classList.add('active');
            
            // å¦‚æœæ˜¯å•†å“é¡µé¢ï¼ŒåŠ è½½å•†å“
            if (pageId === 'products') {
                loadProducts();
            }
            
            // å¦‚æœæ˜¯è´­ç‰©è½¦é¡µé¢ï¼ŒåŠ è½½è´­ç‰©è½¦
            if (pageId === 'cart') {
                loadCart();
            }
        }
        
        // åŠ è½½å•†å“åˆ—è¡¨
        function loadProducts() {
            const products = JSON.parse(localStorage.getItem('products'));
            const productsGrid = document.getElementById('productsGrid');
            
            productsGrid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-price">Â¥${product.price}</div>
                        <div class="product-description">${product.description}</div>
                        <div class="product-actions">
                            <button class="btn-buy" onclick="addToCart(${product.id})">åŠ å…¥è´­ç‰©è½¦</button>
                        </div>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }
        
        // æ·»åŠ åˆ°è´­ç‰©è½¦
        function addToCart(productId) {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•ï¼');
                showPage('login');
                return;
            }
            
            const products = JSON.parse(localStorage.getItem('products'));
            const product = products.find(p => p.id === productId);
            
            if (product) {
                const cart = JSON.parse(localStorage.getItem('cart'));
                const existingItem = cart.find(item => item.productId === productId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        productId: productId,
                        name: product.name,
                        price: product.price,
                        quantity: 1
                    });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                alert('å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼');
            }
        }
        
        // åŠ è½½è´­ç‰©è½¦
        function loadCart() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                document.getElementById('cartItems').innerHTML = '<p>è¯·å…ˆç™»å½•æŸ¥çœ‹è´­ç‰©è½¦</p>';
                return;
            }
            
            const cart = JSON.parse(localStorage.getItem('cart'));
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>è´­ç‰©è½¦ä¸ºç©º</p>';
                cartTotal.textContent = '0';
                return;
            }
            
            let total = 0;
            cartItems.innerHTML = '';
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div>${item.name} Ã— ${item.quantity}</div>
                    <div>Â¥${itemTotal}</div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = total;
        }
        
        // æ¨¡æ‹Ÿä¸‹å•
        function placeOrder() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•ï¼');
                showPage('login');
                return;
            }
            
            const cart = JSON.parse(localStorage.getItem('cart'));
            if (cart.length === 0) {
                alert('è´­ç‰©è½¦ä¸ºç©ºï¼Œæ— æ³•ä¸‹å•ï¼');
                return;
            }
            
            // æ¸…ç©ºè´­ç‰©è½¦
            localStorage.setItem('cart', JSON.stringify([]));
            
            // æ˜¾ç¤ºä¸‹å•æˆåŠŸé¡µé¢
            showPage('orderSuccess');
        }
        
        // ç™»å½•è¡¨å•æäº¤
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                updateUIForLoggedInUser(user);
                showPage('products');
                alert('ç™»å½•æˆåŠŸï¼');
            } else {
                alert('é‚®ç®±æˆ–å¯†ç é”™è¯¯ï¼');
            }
        });
        
        // æ³¨å†Œè¡¨å•æäº¤
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            const users = JSON.parse(localStorage.getItem('users'));
            
            // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
            if (users.find(u => u.email === email)) {
                alert('è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼');
                return;
            }
            
            // åˆ›å»ºæ–°ç”¨æˆ·
            const newUser = {
                id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
                name: name,
                email: email,
                password: password
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            
            updateUIForLoggedInUser(newUser);
            showPage('products');
            alert('æ³¨å†ŒæˆåŠŸï¼');
        });
        
        // æ›´æ–°UIä¸ºå·²ç™»å½•çŠ¶æ€
        function updateUIForLoggedInUser(user) {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('welcomeUser').textContent = `æ¬¢è¿ï¼Œ${user.name}`;
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            localStorage.removeItem('currentUser');
            document.getElementById('authButtons').style.display = 'block';
            document.getElementById('userInfo').style.display = 'none';
            showPage('home');
            alert('å·²é€€å‡ºç™»å½•ï¼');
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
        window.onload = function() {
            initializeData();
        };
    </script>
</body>
</html>
